---
title: "R-Tutorials Using Titanic Data"
author: "Josemari Feliciano"
date: "7/10/2017"
output:
  pdf_document: default
---

# Motivation To This Tutorials:

Arguably, R has the steepest learning curve for Data Scientists and Statisticians.  Once you are comfortable with it, R is very rewarding.  But learning the many ways to represent your data using R is always the main challenge. 
  
For instance, `barplot()` is able to read data from RData seemlessly.  But it is always a challenge to learn the most proper -- and perhaps the simplest -- method to print custom data sets. Plenty of the intermittent and sparse tutorials out there tend to overcomplicated their code.  So my personal struggles with R inspired this tutorials. I want to take the simplest but proper way to do tasks in R.  

# There are four major parts to this tutorials:

1.  How to read and extract data from RData file
2.  How to create basic tally and graphs 
3.  How to run basic descriptive statistics
4.  How to run and read results of inferential statistics

### Tutorial Notes:  

The Beauty of R Studio is the ability to have notebooks for data analysis.  It allows us to run R-code inline similar to IPython Notebooks.  

Think of it as a fancy chemistry notebook where you can somehow run the experiments itself in the notebook -- but for data analysis!  For this notebook and R tutorial, I will use the titanic data for analysis.  This assumes that you have installed both R and RStudio.  


__Note__ :  The mosaic package is required if you want to run the data yourself in your local R environment -- and not to simply view them from my github repo.   If you do not have this installed, run this code in your r-console independently:  
  
```
install.packages("ggplot2")
``` 


$\pagebreak$ 
  
  
  
# R-Tutorials Using Titanic Data  
## Part 1:  Reading data  

We probably want to load the Titanic data first. We probably want to load the mosaic library out of the way as well.  

### Loading Data:
We can accomplish both data loading and library call with the following R-script:

```{r, message=FALSE, warning=FALSE}
load("Titanic.Rdata")
library("mosaic")
```
  
_Note:_  Always rerun/replay the code above when entering this file in your local environment. The pre-ran scripts will remain intact but rerunning them might display errors.  So you might have to rerun this code eventually.  If you see an error, know that this code might be the culprit.  
  
  
  
### Which Variables Are In Data?  

Now that the data has been loaded, we probably want to see which data variables we have to deal with!  Below, we will use `names()` to print the variables within our data.
  
```{r}
names(Titanic)
```
  
The `names()` function we just ran displayed the 6 variables within the Titanic Data which include Gender, Age, Name, Fare, Class and Survived.   
  
Of course, you could have looked at the actual CSV file or RData file directly. But functions like `names()` are very useful when wrangling data from JSON and similar data types.  
  
### Exploring Data Types:

The `sapply()` function is very useful for this to see the variables and their data types.
  
```{r}
sapply(Titanic,class)
```

The output above does make sense; data types seem to match what we would expect.  Age is numeric.  And Gender is a 'factor', most commonly known as a string in other programming languages. 

Another function we could have used is `str()`, but the output can be messy and dense. `str()` does provide more information on the variables in our data.  

```{r}
str(Titanic)
```

The output from `str()` did provide us more information about our variables. For instance, the output shows that there are 2 levels for Gender: "Famale" and "Male".  But `str()` can be messy to look at.

_Note:_ We could have used `View(Titanic)` to open the spreadsheet in a difference pane or tab in RStudio.  But that will require sifting through the spreadsheet.  It's good to familiarize with both `str()` and `sapply()` functions so we don't have leave our tab.  







$\pagebreak$ 
  
  
  
# R-Tutorials Using Titanic Data  
## Part 2:  Creating Quick Tally and Basic Graphs


## Basic Data Tallying and Graph Creation

There are multiple ways of tallying variables.  

### Using count format of `tally()`:  

```{r}
tally(~Gender, format = "count", data = Titanic)
```

As you can see from above output, the count format will give us the raw number of count.  For instance, 388 passengers from the Titanic are female.  

### Using proportion format of `tally()`:  

Another format that statisticians use is the proportion format of `tally()`.


```{r}
tally(~Class, format = "proportion", data = Titanic)
```

According to the output above, it is implied that roughly 47.85% of Titanic passengers bought the low-class tickets.  

### Using percent format of `tally()`:  

Most of Statistics will deal with proportion format like those displayed in the previous section.  So the percent format is really unnecessary. But if you will not use any other statistical test, this might be handy to use. 

```{r}
tally(~Survived, format = "percent", data = Titanic)
```

The output above clearly shows that roughly 59.14% of Titanic passengers did not survive the infamous tragedy.  

_Just a quick note:_  Had we ran the proportion format, the output would have displayed 0.5914 for No. As students and practitioner of Statistics, you need to be fluent in reading via proportions.  


$\pagebreak$ 

## Creating Graphs and Charts of One Categorical Data:

### The function `bargraph()` 

The easiest way to create graph in R is by using the `bargraph()` function:

```{r}
bargraph(~Class, Titanic)
```

It looks like we were able to graph a decent graph.  But the issue with this is:  `bargraph()` lacks flexibility.  So this might be good to create a simply bar graph.  But if you want to creatively label or redesign any aspect of the graph, `bargraph()` will not yield to you.

$\pagebreak$


### The function `barplot()`  

`barplot()` is one of the best functions to plot graphs. Unfortunately, a call like `barplot(~Class, Titanic)` will not work because `barplot()` only accepts arrays, contingency tables and similar data types.   

So there's an extra step required though. But here is an illustration of how to call it properly:

```{r}
#here, table() is called to convert the class data
#to a contingency table that barplot() could read
#we are assigning this table into a variable called "data"
#then, we are passing it to barplot()

data <- table(Titanic$Class)
barplot(data)
```

Look how beautiful this graph is!  Again, we converted the Class data from the Titanic into a contingency table using `table()`.  

__Beautify the graph:__  The graph is very bare.  It lacks labels, titles, and color.  Let us pass some paramaters to modify its properties.  Below, I will create a graph for Survival.  


$\pagebreak$



```{r}
#obviously, we are passing data to xlab, ylab, main, color to add properties to our barplot 
data2 <- table(Titanic$Survived)
barplot(data2, xlab = "Did survive?", ylab = "No. of Passengers", 
        main = "Titanic Survival Count", col = "black")  
```

__Look how much better it looks!__  It looks much better with our custom color, labels, titles.  There's plenty more of modification we could do (such as change the border color of graphs).  But for this, check out the R-documentation page and see which parameters and default values we could change to fit our goals.  







$\pagebreak$

### Graph From Customized Data Through `barplot()`  


For complicated big data, we simply extract data and plot them.  But for simple small data, we could simply pass an array of values for plotting.   

__This particular tutorial is helpful:__  Most tutorials will have you use names.arg inside the `barplot()` and other methodology/sythax that can be a nightmare.  `names()` is your friend here as I will demonstrate below.  


Suppose we found out that the Titanic has a fatality rate of .59 and want to compare it to the fatality rate of two other ships with fatality rates of .41 and .12 respectively.  We can convert all the dependent and independent variables into their own arrays/collection.  
  

```{r}
fatality_rate <- c(.59,.41,.12)
names(fatality_rate) <- c("Titanic","SomeShip_1", "SomeShip_2")


barplot(fatality_rate, main="Fatality Rate Across Different Ships" )
```


$\pagebreak$


*** 

# The rest to be edited/deleted as I go:

# The rest to be edited/deleted as I go:







### Graph From Customized Data Through `barplot()`  


```{r}
counts <- table(Titanic$Class)
barplot(counts)
```

```{r}
counts <-tally(~Gender, format = "count", data = Titanic)
pie(counts, main="Gender Distribution of Titanic Passengers")
```









